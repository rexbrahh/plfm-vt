syntax = "proto3";

package plfm.events.v1;

enum NodeState {
  NODE_STATE_UNSPECIFIED = 0;
  NODE_STATE_ACTIVE = 1;
  NODE_STATE_DRAINING = 2;
  NODE_STATE_DISABLED = 3;
  NODE_STATE_DEGRADED = 4;
  NODE_STATE_OFFLINE = 5;
}

message NodeEnrolledPayload {
  string node_id = 1;
  string hostname = 2;
  string region = 3;
  int32 cpu_cores = 4;
  int64 memory_bytes = 5;
}

message NodeStateChangedPayload {
  string node_id = 1;
  NodeState old_state = 2;
  NodeState new_state = 3;
  optional string reason = 4;
}

message NodeCapacityUpdatedPayload {
  string node_id = 1;
  int32 available_cpu_cores = 2;
  int64 available_memory_bytes = 3;
  int32 instance_count = 4;
}
